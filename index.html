<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Əmək Məcəlləsi - 2026</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Outfit:wght@300;400;500;600;700&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            /* Birbank Brand Colors */
            --birbank-red: #ED1C24;
            --birbank-dark-red: #990000;
            --birbank-gradient: linear-gradient(135deg, #ED1C24 0%, #b30000 100%);
            
            /* --- DARK MODE (Default) --- */
            /* Arxa fon qırmızı YOX, Qırmızı ilə kontrast yaradan Tünd Boz/Qara */
            --bg-body: #121212;
            --bg-gradient: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 50%, #0f0f0f 100%);
            
            --text-main: #ffffff;
            --text-secondary: #a0a0a0; /* Boz mətn */
            
            /* Kartlar üçün bir az şəffaf tünd fon */
            --card-bg: rgba(30, 30, 30, 0.95);
            --card-text: #ffffff;
            
            --section-icon-color: #ED1C24;
            --section-content-text: #e0e0e0;
            --border-color: rgba(255, 255, 255, 0.1);
            
            --grid-bg: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            --footer-bg: #000000;
            --highlight-bg: rgba(237, 28, 36, 0.15); /* Qırmızının çox zəif tonu */
        }

        body.light-mode {
            /* --- LIGHT MODE --- */
            --bg-body: #f4f4f4;
            --bg-gradient: linear-gradient(135deg, #ffffff 0%, #f0f2f5 100%);
            
            --text-main: #1a1a1a;
            --text-secondary: #555555;
            
            --card-bg: #ffffff;
            --card-text: #000000;
            
            --section-icon-color: #ED1C24;
            --section-content-text: #333333;
            --border-color: rgba(0, 0, 0, 0.08);
            
            --grid-bg: #fdfdfd;
            --footer-bg: #1a1a1a;
            --highlight-bg: rgba(237, 28, 36, 0.05);
        }

        body {
            font-family: 'Outfit', sans-serif;
            color: var(--text-main);
            overflow-x: hidden;
            background: var(--bg-body);
            transition: background 0.5s ease, color 0.5s ease;
        }

        /* Controls */
        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .control-btn {
            background: var(--birbank-gradient);
            color: #fff;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            box-shadow: 0 5px 15px rgba(237, 28, 36, 0.3);
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(237, 28, 36, 0.5);
        }

        /* Animated Background Canvas */
        #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background: var(--bg-gradient);
            transition: background 0.5s ease;
        }

        /* Cover Page */
        .cover-page {
            position: relative;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 1;
            overflow: hidden;
        }

        .cover-content {
            position: relative;
            z-index: 2;
            max-width: 900px;
            padding: 0 20px;
            animation: fadeInUp 1.2s ease-out;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .cover-icon {
            font-size: 120px;
            background: var(--birbank-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
            animation: floatIcon 3s ease-in-out infinite;
            color: var(--birbank-red);
        }

        @keyframes floatIcon {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .cover-title {
            font-family: 'Playfair Display', serif;
            font-size: 72px;
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 25px;
            text-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            letter-spacing: -1px;
            color: var(--text-main);
            transition: color 0.5s;
        }

        .cover-subtitle {
            font-size: 28px;
            font-weight: 300;
            margin-bottom: 50px;
            color: var(--text-secondary);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 20px 60px;
            font-size: 20px;
            font-weight: 600;
            color: #fff;
            background: var(--birbank-gradient);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s;
            text-decoration: none;
            box-shadow: 0 15px 40px rgba(237, 28, 36, 0.4);
        }
        
        .cta-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 20px 50px rgba(237, 28, 36, 0.6);
        }

        .scroll-indicator {
            position: absolute; bottom: 40px; left: 50%;
            transform: translateX(-50%); animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-20px); }
            60% { transform: translateX(-50%) translateY(-10px); }
        }
        .scroll-indicator i { font-size: 32px; color: var(--birbank-red); }

        /* Main Content */
        .main-content {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            padding: 80px 0;
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 40px; }

        .section { margin-bottom: 100px; animation: fadeInSection 0.8s ease-out; }
        @keyframes fadeInSection {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-card {
            background: var(--card-bg);
            color: var(--card-text);
            border-radius: 30px;
            padding: 60px;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.3); /* Darker shadow for dark bg */
            position: relative;
            overflow: hidden;
            transition: transform 0.4s ease, box-shadow 0.4s ease, background 0.5s;
        }

        .section-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 6px;
            background: var(--birbank-gradient);
        }

        .section-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 35px 90px rgba(0, 0, 0, 0.5);
        }

        .section-header {
            display: flex; align-items: center; gap: 20px;
            margin-bottom: 40px; padding-bottom: 20px;
            border-bottom: 3px solid var(--birbank-red);
        }

        .section-icon { font-size: 48px; color: var(--section-icon-color); min-width: 60px; }
        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 42px; font-weight: 700;
            color: var(--card-text); line-height: 1.2;
        }

        .section-content {
            font-size: 18px; line-height: 1.8; color: var(--section-content-text);
        }

        .section-content ul { list-style: none; padding: 0; }
        .section-content li {
            padding: 20px 0; padding-left: 40px; position: relative;
            border-bottom: 1px solid var(--border-color);
            transition: padding-left 0.3s ease;
        }
        .section-content li:last-child { border-bottom: none; }
        .section-content li::before {
            content: '▸'; position: absolute; left: 0;
            color: var(--birbank-red); font-size: 24px;
            font-weight: bold; transition: left 0.3s ease;
        }
        .section-content li:hover { padding-left: 50px; }
        .section-content li:hover::before { left: 10px; }

        .highlight-box {
            background: var(--highlight-bg);
            border-left: 5px solid var(--birbank-red);
            padding: 25px 30px; margin: 30px 0;
            border-radius: 10px; font-weight: 500;
            color: var(--card-text);
        }

        /* Grid Layout */
        .grid-container {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px; margin-top: 40px;
        }

        .grid-item {
            background: var(--grid-bg);
            padding: 35px; border-radius: 20px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .grid-item:hover {
            border-color: var(--birbank-red);
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(237, 28, 36, 0.15);
        }

        .grid-item h3 {
            color: var(--birbank-red); font-size: 24px;
            margin-bottom: 15px; font-family: 'Playfair Display', serif;
        }

        /* Footer */
        .footer {
            position: relative; z-index: 1;
            background: var(--footer-bg); padding: 60px 0;
            text-align: center; border-top: 2px solid var(--birbank-red);
            color: #fff;
            transition: background 0.5s;
        }
        .footer-credit { color: var(--birbank-red); font-weight: 600; margin-top: 10px; display: inline-block;}

        @media (max-width: 768px) {
            .cover-title { font-size: 48px; }
            .cover-subtitle { font-size: 20px; }
            .cover-icon { font-size: 80px; }
            .section-card { padding: 40px 30px; }
            .section-title { font-size: 32px; }
            .section-content { font-size: 16px; }
            .container { padding: 0 20px; }
        }
    </style>
</head>
<body>
    
    <!-- Controls -->
    <div class="controls">
        <button class="control-btn" onclick="exportPDF()" title="PDF"><i class="fas fa-file-pdf"></i></button>
        <button class="control-btn" onclick="toggleLang()" title="Dil/Lang"><i class="fas fa-language"></i></button>
        <button class="control-btn" onclick="toggleTheme()" id="themeBtn" title="Rejim"><i class="fas fa-sun"></i></button>
    </div>

    <!-- Animated Background -->
    <canvas id="particles-canvas"></canvas>

    <!-- Content Wrapper -->
    <div id="app"></div>

    <script>
        // --- Data Object ---
        const contentData = {
            az: {
                cover: {
                    title: "Əmək Məcəlləsində Yeniliklər",
                    sub: "2026 - Yeni Tənzimləmələr",
                    btn: "Dəyişikliklərə Bax"
                },
                sections: [
                    {
                        icon: "fa-users",
                        title: "Ailə Vəzifələri olan İşçi",
                        html: `<p style="margin-bottom: 25px;">Əmək Məcəlləsindəki anlayışlar sırasına "Ailə vəzifələri olan işçi" anlayışı daxil edilib. Bu anlayış qulluğa və ya köməyə ehtiyacı olan ailə üzvünə qulluq, kömək göstərilməsi ilə əlaqədar əmək fəaliyyətinə başlamaq, əmək funksiyasını yerinə yetirmək imkanları məhdud olan işçini nəzərdə tutur.</p>
                        <ul>
                            <li>Ailə vəzifələri olan işçilərə əmək münasibətlərində güzəştlərin, imtiyazların və əlavə təminatların verilməsi ayrı-seçkilik hesab edilməyəcək</li>
                            <li>Ailə vəzifələri olan işçi qulluğa və ya köməyə ehtiyacı olan ailə üzvünə qulluq və kömək göstərilməsi ilə əlaqədar əmək funksiyasını yerinə yetirmək imkanları məhdudlaşan işçidir</li>
                            <li>Növbəli iş vaxtı rejimi təşkil edilərkən və gecə növbəsinə işə təyin edilərkən işçilərin ailə vəzifələrinin yerinə yetirilməsi ilə əlaqədar ehtiyacları nəzərə alınacaq</li>
                        </ul>`
                    },
                    {
                        icon: "fa-laptop-house",
                        title: "Məsafədən (Distant) İş",
                        html: `<p style="margin-bottom: 25px;">Yeni dəyişikliklərdən biri işçilər tərəfindən əmək funksiyasının elektron, proqram-texniki və s. vasitələrlə distant iş formasında yerinə yetirilməsinin hüquqi əsasının yaradılmasına xidmət edir.</p>
                        <div class="highlight-box">
                            <strong>Məsafədən (distant) iş</strong> - əmək funksiyasının məsafədən icrasına imkan verən vasitələrlə (elektron, proqram-texniki, telekommunikasiya vasitələri və s.) iş yerlərindən kənarda yerinə yetirilməsidir.
                        </div>
                        <p>Distant işlə bağlı əmək şəraitinin əlavə şərtləri tərəflərin qarşılıqlı razılığı əsasında əmək müqaviləsi ilə müəyyən olunacaq.</p>`
                    },
                    {
                        icon: "fa-medal",
                        title: "İşçi Hərbi Xidmətə Çağırıldıqda",
                        html: `<p>İşçi hərbi xidmətə çağırıldıqda əmək müqaviləsinə xitam verilərkən işəgötürən tərəfindən ona <strong>orta aylıq əmək haqqının azı üç misli miqdarında müavinət</strong> ödənilməsi təmin edilir.</p>`
                    },
                    {
                        icon: "fa-plane-departure",
                        title: "Ezamiyyə",
                        html: `<div class="grid-container">
                            <div class="grid-item">
                                <h3>Əsas İş Yerində Ezamiyyət</h3>
                                <p>Əsas iş yerində ezamiyyətə gedən işçiyə əlavə iş yerində ezamiyyə müddəti qədər ödənişsiz məzuniyyət verilir</p>
                            </div>
                            <div class="grid-item">
                                <h3>Əlavə İş Yerində Ezamiyyət</h3>
                                <p>Əlavə iş yerində ezamiyyətə gedən işçiyə əsas iş yerində ezamiyyə müddəti qədər ödənişsiz məzuniyyət verilir</p>
                            </div>
                        </div>`
                    },
                    {
                        icon: "fa-umbrella-beach",
                        title: "Vakansiya və Məzuniyyət",
                        html: `<h3 style="color: var(--birbank-red); margin-bottom: 20px; font-size: 28px;">Vakansiya</h3>
                        <ul style="margin-bottom: 40px;">
                            <li>İşəgötürən vakansiya yarandıqda və əvvəllər natamam iş vaxtını yaradan zəruri amillər dəyişdikdə, natamam iş vaxtında çalışan işçinin tam iş vaxtında çalışması üçün tədbir görəcək</li>
                        </ul>
                        <h3 style="color: var(--birbank-red); margin-bottom: 20px; font-size: 28px;">Məzuniyyət Zamanı Əmək Haqqı</h3>
                        <div class="highlight-box">
                            Məzuniyyətdə olduğu müddətdə işçinin sonuncu əmək haqqından az olmamaqla orta əmək haqqı saxlanılacaq
                        </div>`
                    },
                    {
                        icon: "fa-shield-alt",
                        title: "Konfidensial Məlumatlarla Bağlı",
                        html: `<p>Qanunla konfidensial hesab edilən xüsusi kateqoriyalı fərdi məlumatların yayılması da işçi tərəfindən əmək vəzifələrinin kobud şəkildə pozulması hesab edilən hallar sırasına daxil edilib.</p>`
                    },
                    {
                        icon: "fa-calendar-check",
                        title: "Azı 46 Gün Məzuniyyət",
                        html: `<p style="margin-bottom: 20px;">Azı 46 təqvim günü əmək məzuniyyəti verilən işçilərin sırasına aşağıdakılar daxil edilib:</p>
                        <ul>
                            <li>Ölkəmizin ərazi bütövlüyünün, müstəqilliyinin və konstitusiya quruluşunun müdafiəsi ilə bağlı təltif edilmiş işçilər</li>
                            <li>20 Yanvar hadisələri, hərbi xidmət vəzifələrini yerinə yetirməklə əlaqədar əlilliyi olan işçilər</li>
                            <li>"Müharibə veteranı" adı almış işçilər</li>
                            <li>Azərbaycan Respublikasının ən yüksək təltifinə layiq görülmüş işçilər</li>
                        </ul>`
                    },
                    {
                        icon: "fa-baby-carriage",
                        title: "Analıq və Atalıq Məzuniyyəti",
                        html: `<div class="grid-container">
                            <div class="grid-item">
                                <h3><i class="fas fa-female" style="color: var(--birbank-red); margin-right: 10px;"></i> Analıq Məzuniyyəti</h3>
                                <p>Hamiləliyə və doğuşa görə məzuniyyətin doğuşdan əvvəlki hissəsinin müddəti doğuş gözlənilən gündən uşağın doğulduğu günədək ötən günlər qədər ödənişli olaraq uzadılacaq.</p>
                            </div>
                            <div class="grid-item">
                                <h3><i class="fas fa-male" style="color: var(--birbank-red); margin-right: 10px;"></i> Atalıq Məzuniyyəti</h3>
                                <p>Uşağının doğulması ilə əlaqədar kişilərə <strong>14 təqvim günü ödənişli məzuniyyət</strong> verilir</p>
                            </div>
                        </div>`
                    },
                    {
                        icon: "fa-hard-hat",
                        title: "Əməyin Mühafizəsi",
                        html: `<ul>
                            <li>50 nəfərdən çox işçisi olan iş yerlərində əməyin mühafizəsi üzrə mühəndis vəzifəsinin təsis edilməsi</li>
                            <li>İş yerlərində işçi sayı 50-dən az olduqda mütəxəssis vəzifəsinin təsis edilməsi</li>
                            <li>Zərərli iş yerlərində <strong>3 ayda bir dəfədən</strong>, digər iş yerlərində <strong>ildə bir dəfədən az olmayaraq</strong> əməyin mühafizəsi üzrə təlimatlandırılması</li>
                        </ul>`
                    },
                    {
                        icon: "fa-user-injured",
                        title: "Əmək Qabiliyyətinin İtirilməsi",
                        html: `<p>Əmək qabiliyyətini fasiləsiz olaraq altı aydan çox müddətə davamlı itirməsi ilə əlaqədar, uyğunlaşdırma və ya yüngül işə keçirilməsi mümkün olmadıqda müqaviləyə xitam verilir.</p>`
                    }
                ],
                footer: "Yeniliklər - 2026"
            },
            en: {
                cover: {
                    title: "Labor Code Innovations",
                    sub: "2026 - New Regulations",
                    btn: "View Changes"
                },
                sections: [
                    {
                        icon: "fa-users",
                        title: "Family Responsibilities",
                        html: `<p style="margin-bottom: 25px;">The concept of "Employee with family responsibilities" has been introduced. This refers to employees with limited ability to perform duties due to caring for family members in need.</p>
                        <ul>
                            <li>Granting privileges to these employees will not be considered discrimination.</li>
                            <li>Family needs will be taken into account when organizing shift work and night shifts.</li>
                        </ul>`
                    },
                    {
                        icon: "fa-laptop-house",
                        title: "Remote Work",
                        html: `<p style="margin-bottom: 25px;">Legal basis created for remote work performance via electronic means.</p>
                        <div class="highlight-box">
                            <strong>Remote work</strong> - work performed outside workplace using electronic/telecommunication means.
                        </div>
                        <p>Additional conditions for remote work will be determined by the employment contract upon mutual agreement.</p>`
                    },
                    {
                        icon: "fa-medal",
                        title: "Military Service Call-up",
                        html: `<p>When an employee is called to military service and the contract is terminated, an allowance of <strong>at least three times the average monthly salary</strong> is guaranteed.</p>`
                    },
                    {
                        icon: "fa-plane-departure",
                        title: "Business Trips",
                        html: `<div class="grid-container">
                            <div class="grid-item">
                                <h3>Main Workplace Trip</h3>
                                <p>Unpaid leave is granted at the additional workplace for the duration of the trip.</p>
                            </div>
                            <div class="grid-item">
                                <h3>Additional Workplace Trip</h3>
                                <p>Unpaid leave is granted at the main workplace for the duration of the trip.</p>
                            </div>
                        </div>`
                    },
                    {
                        icon: "fa-umbrella-beach",
                        title: "Vacancy and Leave",
                        html: `<h3 style="color: var(--birbank-red); margin-bottom: 20px; font-size: 28px;">Vacancy</h3>
                        <ul style="margin-bottom: 40px;">
                            <li>Employers will take measures to move part-time workers to full-time when vacancies arise.</li>
                        </ul>
                        <h3 style="color: var(--birbank-red); margin-bottom: 20px; font-size: 28px;">Leave Salary</h3>
                        <div class="highlight-box">
                            Average salary during leave will not be less than the employee's last salary.
                        </div>`
                    },
                    {
                        icon: "fa-shield-alt",
                        title: "Confidential Information",
                        html: `<p>Dissemination of legally confidential personal data is now considered a gross violation of labor duties.</p>`
                    },
                    {
                        icon: "fa-calendar-check",
                        title: "Min. 46 Days Leave",
                        html: `<p style="margin-bottom: 20px;">At least 46 calendar days of leave granted to:</p>
                        <ul>
                            <li>Employees awarded for defending territorial integrity and sovereignty.</li>
                            <li>Persons disabled due to January 20 events or military service.</li>
                            <li>War Veterans.</li>
                            <li>Holders of the highest state honors.</li>
                        </ul>`
                    },
                    {
                        icon: "fa-baby-carriage",
                        title: "Maternity & Paternity",
                        html: `<div class="grid-container">
                            <div class="grid-item">
                                <h3><i class="fas fa-female" style="color: var(--birbank-red); margin-right: 10px;"></i> Maternity</h3>
                                <p>Unused pre-birth leave days will be added to the post-birth period with pay.</p>
                            </div>
                            <div class="grid-item">
                                <h3><i class="fas fa-male" style="color: var(--birbank-red); margin-right: 10px;"></i> Paternity</h3>
                                <p>Men are granted <strong>14 calendar days of paid leave</strong> upon the birth of a child.</p>
                            </div>
                        </div>`
                    },
                    {
                        icon: "fa-hard-hat",
                        title: "Labor Protection",
                        html: `<ul>
                            <li>Workplaces with 50+ employees: Safety Engineer position established.</li>
                            <li>Workplaces with <50 employees: Safety Specialist appointed.</li>
                            <li>Training: <strong>Every 3 months</strong> for hazardous jobs, <strong>annually</strong> for others.</li>
                        </ul>`
                    },
                    {
                        icon: "fa-user-injured",
                        title: "Loss of Work Capacity",
                        html: `<p>Contract terminated if adaptation or transfer to light work is impossible after 6+ months of continuous loss of work capacity.</p>`
                    }
                ],
                footer: "Innovations - 2026"
            }
        };

        // State
        let currentLang = 'az';
        let isDarkMode = true;

        // Render Function
        function render() {
            const data = contentData[currentLang];
            const app = document.getElementById('app');
            
            let html = `
            <!-- Cover Page -->
            <div class="cover-page">
                <div class="cover-content">
                    <div class="cover-icon"><i class="fas fa-briefcase"></i></div>
                    <h1 class="cover-title">${data.cover.title}</h1>
                    <p class="cover-subtitle">${data.cover.sub}</p>
                    <a href="#content" class="cta-button">
                        <i class="fas fa-arrow-down"></i> ${data.cover.btn}
                    </a>
                </div>
                <div class="scroll-indicator"><i class="fas fa-chevron-down"></i></div>
            </div>

            <!-- Main Content -->
            <div class="main-content" id="content">
                <div class="container">`;

            // Sections
            data.sections.forEach(section => {
                html += `
                <div class="section">
                    <div class="section-card">
                        <div class="section-header">
                            <div class="section-icon"><i class="fas ${section.icon}"></i></div>
                            <h2 class="section-title">${section.title}</h2>
                        </div>
                        <div class="section-content">${section.html}</div>
                    </div>
                </div>`;
            });

            html += `
                </div>
            </div>
            
            <!-- Footer -->
            <div class="footer">
                <div class="footer-content">
                    <p class="footer-text">${data.footer}</p>
                    <p class="footer-credit">Created by Nizami Tahirov</p>
                </div>
            </div>`;

            app.innerHTML = html;
            
            // Re-attach scroll listener for new button
            document.querySelector('.cta-button').addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelector('#content').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Re-trigger observer
            observeSections();
        }

        // --- Intersection Observer for Animations ---
        function observeSections() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'fadeInSection 0.8s ease-out forwards';
                    }
                });
            }, { threshold: 0.1, rootMargin: '0px 0px -100px 0px' });

            document.querySelectorAll('.section').forEach(section => {
                observer.observe(section);
            });
        }

        // --- Logic Functions ---

        function toggleLang() {
            currentLang = currentLang === 'az' ? 'en' : 'az';
            render();
        }

        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('light-mode');
            
            const btn = document.getElementById('themeBtn').querySelector('i');
            btn.className = isDarkMode ? 'fas fa-sun' : 'fas fa-moon';
            
            // Particles need color update based on theme
            updateParticleColors();
        }

        // Helper for PDF transliteration (ə->e, etc)
        function azToEn(text) {
            const charMap = {
                'ə': 'e', 'Ə': 'E', 'ğ': 'g', 'Ğ': 'G', 'ı': 'i', 'I': 'I',
                'ş': 's', 'Ş': 'S', 'ç': 'c', 'Ç': 'C', 'ö': 'o', 'Ö': 'O', 'ü': 'u', 'Ü': 'U'
            };
            return text.replace(/[əƏğĞıIşŞçÇöÖüÜ]/g, m => charMap[m]);
        }

        function exportPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const data = contentData[currentLang];
            
            const margin = 20;
            const pageWidth = 210;
            const maxWidth = pageWidth - (margin * 2);
            let y = 30;

            // Title
            doc.setFontSize(22);
            doc.text(azToEn(data.cover.title), pageWidth/2, y, { align: 'center' });
            y += 10;
            doc.setFontSize(14);
            doc.text(azToEn(data.cover.sub), pageWidth/2, y, { align: 'center' });
            y += 20;

            data.sections.forEach(item => {
                // New page check
                if (y > 270) { doc.addPage(); y = 20; }

                // Section Title (Red Color)
                doc.setFontSize(16);
                doc.setTextColor(237, 28, 36); // Birbank Red
                doc.text(azToEn(item.title), margin, y);
                y += 10;

                // Content (Strip HTML tags)
                doc.setFontSize(11);
                doc.setTextColor(0, 0, 0);
                
                // Create a temporary DOM element to parse HTML to text
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = item.html;
                
                const elements = tempDiv.querySelectorAll('p, li, div');
                elements.forEach(el => {
                    let txt = el.textContent.trim();
                    if(txt) {
                        txt = azToEn(txt);
                        if(el.tagName === 'LI') txt = '• ' + txt;
                        
                        const lines = doc.splitTextToSize(txt, maxWidth);
                        if (y + (lines.length * 6) > 280) {
                            doc.addPage();
                            y = 20;
                        }
                        doc.text(lines, margin, y);
                        y += (lines.length * 6) + 3;
                    }
                });
                y += 10; // Space between sections
            });

            doc.save(`Emek_Mecellesi_2026_${currentLang}.pdf`);
        }

        // --- Canvas Animation ---
        const canvas = document.getElementById('particles-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
            }
            draw(color) {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = color;
                ctx.fill();
            }
        }

        function initParticles() {
            particles = [];
            for (let i = 0; i < 80; i++) particles.push(new Particle());
        }

        let particleColor = 'rgba(237, 28, 36, 0.5)';
        let lineColor = 'rgba(237, 28, 36,';

        function updateParticleColors() {
            if(isDarkMode) {
                // Dark Background -> Red Particles (Contrast)
                particleColor = 'rgba(237, 28, 36, 0.6)'; 
                lineColor = 'rgba(237, 28, 36,'; 
            } else {
                // Light Background -> Red Particles
                particleColor = 'rgba(237, 28, 36, 0.4)'; 
                lineColor = 'rgba(153, 0, 0,'; 
            }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                p.update();
                p.draw(particleColor);
            });

            // Connect
            for (let i = 0; i < particles.length; i++) {
                for (let j = i + 1; j < particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const d = Math.sqrt(dx * dx + dy * dy);
                    if (d < 150) {
                        ctx.beginPath();
                        ctx.strokeStyle = `${lineColor} ${1 - d / 150})`;
                        ctx.lineWidth = 0.5;
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animate);
        }

        // Init
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        initParticles();
        updateParticleColors();
        animate();
        render(); // Initial Render

    </script>
</body>
</html>
